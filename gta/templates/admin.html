{% extends 'base.html' %}
{% block content %}

<!-- Code Here-->
<div class="flex-container-columm">
    
    <h2 style="text-align: center;">Admin Dashboard</h2>
    
    <button class="btn btn-primary btn-job">{{render_nav_item('form.CreateJobPage', 'Create Job')}}</button>
    <nav class="navbar navbar-center small-my-navbar">
        <ul class="nav nav-pills">
            <li class="nav-item" style="margin-inline: 5px;">
                <a class="nav-link active" id="jobsButton" onclick="displayJobs()">Jobs</a>
            </li>
            <li class="nav-item" style="margin-inline: 5px;">
                <a class="nav-link" id="applicationsButton" onclick="displayApplications()">Applications</a>
            </li>
            <li class="nav-item" style="margin-inline: 5px;">
                <a class="nav-link" id = "usersButton" onclick="displayUsers()">Users</a>
            </li>
        </ul>
    </nav>
</div>

<div class="flex-container-column">
    <div class="flex-child active" style="display: block;"  id="jobsList">
        <h3>Jobs</h3>
            <ul id="job-list-group" class="list-group">
                {% for j in jobs %}
                    <li class="list-group-item">
                        <h5>{{ j['course'] }} - <span class="badge badge-primary">{{ j['role_name'] }}</span></h5>
                        <p>{% if j['cert_required'] %}<span class="badge badge-primary">Certification Required</span>{% else %}&nbsp;{% endif %}</p>
                        <p>Job ID: {{ j['job_id'] }}</p>
                        <!-- Additional job details here, if any -->
                        <button class="btn btn-primary">Edit</button>
                        <button class="btn btn-danger" onclick="confirmAndRemoveJob({{ j['job_id'] }})">Remove Job</button>
                    </li>
                    <div></div>
                {% endfor %}
            </ul>
    </div>
    <div class="flex-child" style="display: none;" id="applicationsList">
        <h3>Applications</h3>
        {% for a in apps %}
        <div class="application-post list-group-item">
            {{ a['user_id'] }}
            {{ a['course'] }}
            <span class="badge badge-primary"> {{ a['role'] }} </span>
            <p>User: {{ a['user_id']}}</p>
            <p>Job ID: {{ a['job_id'] }}</p>
            <p>Status: {% if a['status'] %} Open {% else %} Closed {% endif %}</p>
            <button class="btn btn-primary">View</button>
            <button class="btn btn-primary">Open/Close</button>
            <button class="btn btn-danger">Reject</button>
            <button class="btn btn-primary">Accept</button>
        </div>
        <div></div>
        {% endfor%}
    </div>
    <div class="flex-child" style="display: none;" id="usersList">
        <h3>Users</h3>
        {% for u in users %}
        <div class="application-post list-group-item">
            <p>User ID: {{ u['user_id'] }}</p>
            <p>Name: {{ u['fname'] }} {{ u['lname'] }}</p> <!-- Assuming you want to display the name -->
            <p>Email: {{ u['email'] }}</p>
            {% if u['role'] == 5%}
            <span class="badge badge-primary">User Type: Admin</span>
            {% else %}
            <span class="badge badge-primary">User Type: Student</span>
            {% endif %}
            <!-- You can add other fields like major, degree, etc., similar to the above line -->
        </div>
        <div></div>
        {% endfor %}
    </div>
    <div class="flex-child"></div>
</div>
</div>

<!-- I added this to see if there were users with the same email before making emails unique true
this doesn't have to stay but please leave for now for debugging purposes -->


{% endblock %}